# ìº í•‘ì¥ ì˜ˆì•½ ì•Œë¦¼ ì‹œìŠ¤í…œ - ìš´ì˜ì ë§¤ë‰´ì–¼

## ğŸ“– ëª©ì°¨

1. [ì‹œìŠ¤í…œ ê°œìš”](#ì‹œìŠ¤í…œ-ê°œìš”)
2. [ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜](#ì‹œìŠ¤í…œ-ì•„í‚¤í…ì²˜)
3. [ì„œë²„ ì„¤ì¹˜ ë° ë°°í¬](#ì„œë²„-ì„¤ì¹˜-ë°-ë°°í¬)
4. [ì‹œìŠ¤í…œ ì„¤ì •](#ì‹œìŠ¤í…œ-ì„¤ì •)
5. [ì‹œìŠ¤í…œ ìš´ì˜](#ì‹œìŠ¤í…œ-ìš´ì˜)
6. [ëª¨ë‹ˆí„°ë§ ë° ë¡œê·¸ ê´€ë¦¬](#ëª¨ë‹ˆí„°ë§-ë°-ë¡œê·¸-ê´€ë¦¬)
7. [ë°±ì—… ë° ë³µêµ¬](#ë°±ì—…-ë°-ë³µêµ¬)
8. [íŠ¸ëŸ¬ë¸”ìŠˆíŒ…](#íŠ¸ëŸ¬ë¸”ìŠˆíŒ…)
9. [ë³´ì•ˆ ê´€ë¦¬](#ë³´ì•ˆ-ê´€ë¦¬)
10. [ì„±ëŠ¥ ìµœì í™”](#ì„±ëŠ¥-ìµœì í™”)
11. [ìœ ì§€ë³´ìˆ˜ ê°€ì´ë“œ](#ìœ ì§€ë³´ìˆ˜-ê°€ì´ë“œ)

---

## ì‹œìŠ¤í…œ ê°œìš”

### ì‹œìŠ¤í…œ êµ¬ì„±

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   ì‚¬ìš©ì (Browser)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚ HTTPS
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Frontend (React + Vite)                 â”‚
â”‚          - ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤                          â”‚
â”‚          - Firebase Auth ì—°ë™                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚ REST API
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Backend (Node.js + Express)                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Scheduler Service (node-cron)                â”‚  â”‚
â”‚  â”‚  - ë§¤ë¶„ ì‹¤í–‰ (1-20ì´ˆ ëœë¤ ë”œë ˆì´)              â”‚  â”‚
â”‚  â”‚  - ìŠ¤í¬ë˜í•‘ â†’ ì•Œë¦¼ ì²´í¬ â†’ Firestore ì €ì¥      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Scraper Service (Playwright)                 â”‚  â”‚
â”‚  â”‚  - Headless ë¸Œë¼ìš°ì € ê¸°ë°˜ ìŠ¤í¬ë˜í•‘             â”‚  â”‚
â”‚  â”‚  - 3ê°œì›” ë°ì´í„° ìˆ˜ì§‘ (í˜„ì¬ì›” + 2ê°œì›”)         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Notification Service (Nodemailer)            â”‚  â”‚
â”‚  â”‚  - Gmail SMTP ì´ë©”ì¼ ì „ì†¡                     â”‚  â”‚
â”‚  â”‚  - 24ì‹œê°„ ì¤‘ë³µ ì•Œë¦¼ ë°©ì§€                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Firebase (Cloud Services)                    â”‚
â”‚  - Authentication (ì‚¬ìš©ì ì¸ì¦)                      â”‚
â”‚  - Firestore (NoSQL Database)                        â”‚
â”‚    â”œâ”€ users                                          â”‚
â”‚    â”œâ”€ userSettings                                   â”‚
â”‚    â”œâ”€ availability                                   â”‚
â”‚    â”œâ”€ notifications                                  â”‚
â”‚    â””â”€ scrapingLogs                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ê¸°ìˆ  ìŠ¤íƒ

**Backend**
- Node.js 18+ (ES Modules)
- Express.js (REST API)
- Playwright (ì›¹ ìŠ¤í¬ë˜í•‘)
- node-cron (ìŠ¤ì¼€ì¤„ëŸ¬)
- Firebase Admin SDK (ì¸ì¦/DB)
- Nodemailer (ì´ë©”ì¼ ì „ì†¡)

**Frontend**
- React 18+
- Vite (ë¹Œë“œ ë„êµ¬)
- Ant Design (UI ì»´í¬ë„ŒíŠ¸)
- Tailwind CSS (ìŠ¤íƒ€ì¼ë§)
- Firebase Client SDK (ì¸ì¦)
- Axios (HTTP í´ë¼ì´ì–¸íŠ¸)

**Infrastructure**
- Firebase Authentication
- Firestore Database
- Gmail SMTP (ì´ë©”ì¼)

---

## ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### ë°ì´í„° í”Œë¡œìš°

#### 1. ìŠ¤í¬ë˜í•‘ í”Œë¡œìš°
```
Scheduler (ë§¤ë¶„ ì‹¤í–‰)
    â†“
Sleep ì‹œê°„ ì²´í¬ (01:00-08:00 KST)
    â†“
í™œì„± ì„¤ì • í™•ì¸ (ë¯¸ë˜ ë‚ ì§œ í¬í•¨ ì—¬ë¶€)
    â†“
Scraper Service ì‹¤í–‰
    â†“
Playwrightë¡œ ìº í•‘ì¥ ì‚¬ì´íŠ¸ ì ‘ì†
    â†“
3ê°œì›” ë°ì´í„° íŒŒì‹± (í˜„ì¬ì›”, +1ì›”, +2ì›”)
    â†“
Firestoreì— ì €ì¥ (availability ì»¬ë ‰ì…˜)
    â†“
Scraping Log ê¸°ë¡ (scrapingLogs ì»¬ë ‰ì…˜)
```

#### 2. ì•Œë¦¼ í”Œë¡œìš°
```
ìŠ¤í¬ë˜í•‘ ì™„ë£Œ í›„ ì‹¤í–‰
    â†“
ëª¨ë“  í™œì„± UserSettings ì¡°íšŒ
    â†“
ê° ì„¤ì •ë³„ë¡œ ì¡°ê±´ ë§¤ì¹­
    - campingName
    - region
    - area[] (OR ì¡°ê±´)
    - dateRange (From ~ To)
    â†“
ë§¤ì¹­ëœ availability í™•ì¸
    â†“
ì¤‘ë³µ ì•Œë¦¼ ì²´í¬ (24ì‹œê°„ ë‚´ ë™ì¼ ì•Œë¦¼)
    â†“
ì´ë©”ì¼ ì „ì†¡ (Nodemailer + Gmail)
    â†“
Notification Log ê¸°ë¡
```

#### 3. API ì¸ì¦ í”Œë¡œìš°
```
Frontendì—ì„œ API í˜¸ì¶œ
    â†“
Axios Interceptorì—ì„œ Firebase ID Token ì¶”ê°€
    â†“
Backend auth.middleware.js
    â†“
Firebase Admin SDKë¡œ í† í° ê²€ì¦
    â†“
ì‚¬ìš©ì ì •ë³´ ì¶”ì¶œ (req.user)
    â†“
API í•¸ë“¤ëŸ¬ ì‹¤í–‰
```

### Firestore ìŠ¤í‚¤ë§ˆ

#### users ì»¬ë ‰ì…˜
```javascript
{
  uid: "firebase-user-id",           // Document ID
  email: "user@example.com",
  displayName: "í™ê¸¸ë™",
  notificationEmail: "notify@example.com",  // ì•Œë¦¼ ë°›ì„ ì´ë©”ì¼ (optional)
  createdAt: Timestamp,
  updatedAt: Timestamp
}
```

#### userSettings ì»¬ë ‰ì…˜
```javascript
{
  id: "auto-generated-id",           // Document ID
  userId: "firebase-user-id",
  campingName: "ë‹¤ë¦¬ì•ˆê³„ê³¡ìº í•‘ì¥",
  region: "ê²½ê¸°ë„",
  area: ["ë°í¬A", "ë°í¬B"],          // ë°°ì—´
  dateFrom: "2025-11-01",            // YYYY-MM-DD
  dateTo: "2025-11-03",
  isActive: true,
  createdAt: Timestamp,
  updatedAt: Timestamp
}
```

#### availability ì»¬ë ‰ì…˜
```javascript
{
  id: "auto-generated-id",           // Document ID
  campingName: "ë‹¤ë¦¬ì•ˆê³„ê³¡ìº í•‘ì¥",
  region: "ê²½ê¸°ë„",
  area: "ë°í¬A",
  date: "2025-11-01",
  availableCount: 3,
  scrapedAt: Timestamp
}
```

#### notifications ì»¬ë ‰ì…˜
```javascript
{
  id: "auto-generated-id",           // Document ID
  userId: "firebase-user-id",
  settingId: "user-setting-id",
  campingName: "ë‹¤ë¦¬ì•ˆê³„ê³¡ìº í•‘ì¥",
  area: "ë°í¬A",
  date: "2025-11-01",
  notificationType: "email",
  sentAt: Timestamp
}
```

#### scrapingLogs ì»¬ë ‰ì…˜
```javascript
{
  id: "auto-generated-id",           // Document ID
  startedAt: Timestamp,
  completedAt: Timestamp,
  status: "success" | "error" | "running",
  itemsScraped: 180,                 // ìŠ¤í¬ë˜í•‘ëœ í•­ëª© ìˆ˜
  errorMessage: null | "error details"
}
```

---

## ì„œë²„ ì„¤ì¹˜ ë° ë°°í¬

### 1. ì‚¬ì „ ìš”êµ¬ì‚¬í•­

#### ì„œë²„ ìŠ¤í™ (ìµœì†Œ)
- **OS**: Ubuntu 20.04 LTS ì´ìƒ, CentOS 8+, Debian 10+
- **CPU**: 2 Core ì´ìƒ
- **RAM**: 2GB ì´ìƒ (Playwright ì‹¤í–‰ ê³ ë ¤)
- **Storage**: 20GB ì´ìƒ
- **ë„¤íŠ¸ì›Œí¬**: ê³ ì • IP ë˜ëŠ” ë„ë©”ì¸

#### í•„ìˆ˜ ì†Œí”„íŠ¸ì›¨ì–´
- Node.js 18.x ì´ìƒ
- npm 9.x ì´ìƒ
- Git
- PM2 (í”„ë¡œì„¸ìŠ¤ ê´€ë¦¬)
- Nginx ë˜ëŠ” Apache (ì›¹ ì„œë²„)

### 2. ì„œë²„ ì¤€ë¹„

#### 2.1 Node.js ì„¤ì¹˜
```bash
# Ubuntu/Debian
curl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash -
sudo apt-get install -y nodejs

# CentOS/RHEL
curl -fsSL https://rpm.nodesource.com/setup_20.x | sudo bash -
sudo yum install -y nodejs

# ì„¤ì¹˜ í™•ì¸
node --version  # v20.x.x
npm --version   # 9.x.x
```

#### 2.2 Git ì„¤ì¹˜
```bash
# Ubuntu/Debian
sudo apt-get install git

# CentOS/RHEL
sudo yum install git
```

#### 2.3 PM2 ì„¤ì¹˜ (ì „ì—­)
```bash
sudo npm install -g pm2

# PM2 ì„¤ì¹˜ í™•ì¸
pm2 --version
```

#### 2.4 Playwright ì‹œìŠ¤í…œ ì˜ì¡´ì„± ì„¤ì¹˜
```bash
# Ubuntu/Debian
sudo apt-get install -y \
    libnss3 \
    libatk-bridge2.0-0 \
    libdrm2 \
    libxkbcommon0 \
    libgbm1 \
    libasound2

# Playwright ë¸Œë¼ìš°ì € ì„¤ì¹˜ëŠ” npm install ì‹œ ìë™ ì‹¤í–‰
```

### 3. ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬

#### 3.1 ì €ì¥ì†Œ í´ë¡ 
```bash
# ë°°í¬ ë””ë ‰í† ë¦¬ë¡œ ì´ë™
cd /var/www
# ë˜ëŠ” ì›í•˜ëŠ” ìœ„ì¹˜
cd /home/username

# GitHubì—ì„œ í´ë¡ 
git clone https://github.com/kwhong/camping-reservation-notifier.git
cd camping-reservation-notifier
```

#### 3.2 Backend ì„¤ì •

```bash
cd backend

# íŒ¨í‚¤ì§€ ì„¤ì¹˜
npm install

# .env íŒŒì¼ ìƒì„±
nano .env
```

**.env íŒŒì¼ ë‚´ìš©**:
```env
PORT=3000
NODE_ENV=production
EMAIL_USER=your-gmail@gmail.com
EMAIL_APP_PASSWORD=your-gmail-app-password
```

**Gmail App Password ë°œê¸‰ ë°©ë²•**:
1. Google ê³„ì • â†’ ë³´ì•ˆ
2. 2ë‹¨ê³„ ì¸ì¦ í™œì„±í™”
3. "ì•± ë¹„ë°€ë²ˆí˜¸" ìƒì„±
4. "ë©”ì¼" ì„ íƒ, "ê¸°íƒ€" ì„ íƒ
5. ìƒì„±ëœ 16ìë¦¬ ë¹„ë°€ë²ˆí˜¸ë¥¼ `EMAIL_APP_PASSWORD`ì— ì…ë ¥

#### 3.3 Firebase ì„œë¹„ìŠ¤ ê³„ì • ì„¤ì •

1. Firebase Console (https://console.firebase.google.com/) ì ‘ì†
2. í”„ë¡œì íŠ¸ ì„¤ì • â†’ ì„œë¹„ìŠ¤ ê³„ì •
3. "ìƒˆ ë¹„ê³µê°œ í‚¤ ìƒì„±" í´ë¦­
4. JSON íŒŒì¼ ë‹¤ìš´ë¡œë“œ
5. íŒŒì¼ì„ í”„ë¡œì íŠ¸ ë£¨íŠ¸ì— ì €ì¥:
   ```bash
   # í”„ë¡œì íŠ¸ ë£¨íŠ¸ë¡œ ì´ë™
   cd /var/www/camping-reservation-notifier

   # JSON íŒŒì¼ ì—…ë¡œë“œ (íŒŒì¼ëª…: camping-scraper-prod-firebase-ì„¤ì •.json)
   # SCP ë˜ëŠ” SFTPë¡œ ì—…ë¡œë“œ
   ```

6. íŒŒì¼ ê¶Œí•œ ì„¤ì •:
   ```bash
   chmod 600 camping-scraper-prod-firebase-ì„¤ì •.json
   ```

#### 3.4 Backend ì‹¤í–‰

**ìˆ˜ë™ ì‹¤í–‰ (í…ŒìŠ¤íŠ¸)**:
```bash
cd backend
npm start
```

**PM2ë¡œ ì‹¤í–‰ (í”„ë¡œë•ì…˜)**:
```bash
cd backend

# PM2ë¡œ ì‹œì‘
pm2 start src/app.js --name camping-backend

# PM2 í”„ë¡œì„¸ìŠ¤ í™•ì¸
pm2 list

# ë¡œê·¸ í™•ì¸
pm2 logs camping-backend

# ì„œë²„ ì¬ì‹œì‘ì‹œ ìë™ ì‹œì‘ ì„¤ì •
pm2 startup
pm2 save
```

**PM2 ì£¼ìš” ëª…ë ¹ì–´**:
```bash
pm2 start camping-backend      # ì‹œì‘
pm2 stop camping-backend       # ì •ì§€
pm2 restart camping-backend    # ì¬ì‹œì‘
pm2 delete camping-backend     # ì‚­ì œ
pm2 logs camping-backend       # ë¡œê·¸ ì‹¤ì‹œê°„ í™•ì¸
pm2 logs camping-backend --lines 100  # ìµœê·¼ 100ì¤„
pm2 monit                      # ëª¨ë‹ˆí„°ë§ í™”ë©´
```

#### 3.5 Frontend ë¹Œë“œ ë° ë°°í¬

```bash
cd ../frontend

# íŒ¨í‚¤ì§€ ì„¤ì¹˜
npm install

# .env íŒŒì¼ ìƒì„±
nano .env
```

**.env íŒŒì¼ ë‚´ìš©**:
```env
VITE_API_URL=http://your-server-ip:3000/api
# ë˜ëŠ” ë„ë©”ì¸ ì‚¬ìš©ì‹œ
VITE_API_URL=https://yourdomain.com/api
```

**Firebase í´ë¼ì´ì–¸íŠ¸ ì„¤ì • (í•„ìš”ì‹œ ìˆ˜ì •)**:
```bash
nano src/services/firebase.js
```

```javascript
const firebaseConfig = {
  apiKey: "YOUR_API_KEY",
  authDomain: "YOUR_AUTH_DOMAIN",
  projectId: "YOUR_PROJECT_ID",
  storageBucket: "YOUR_STORAGE_BUCKET",
  messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
  appId: "YOUR_APP_ID",
  measurementId: "YOUR_MEASUREMENT_ID"
};
```

**í”„ë¡œë•ì…˜ ë¹Œë“œ**:
```bash
npm run build

# ë¹Œë“œ ì™„ë£Œ í™•ì¸
ls -la dist/
```

### 4. Nginx ì›¹ ì„œë²„ ì„¤ì •

#### 4.1 Nginx ì„¤ì¹˜
```bash
# Ubuntu/Debian
sudo apt-get install nginx

# CentOS/RHEL
sudo yum install nginx

# ì‹œì‘ ë° ìë™ ì‹œì‘ ì„¤ì •
sudo systemctl start nginx
sudo systemctl enable nginx
```

#### 4.2 Nginx ì„¤ì • íŒŒì¼ ìƒì„±
```bash
sudo nano /etc/nginx/sites-available/camping-notifier
```

**ì„¤ì • ë‚´ìš©**:
```nginx
server {
    listen 80;
    server_name your-domain.com www.your-domain.com;
    # ë˜ëŠ” IP ì‚¬ìš©ì‹œ
    # server_name 123.456.789.0;

    # Frontend (React ë¹Œë“œ íŒŒì¼)
    root /var/www/camping-reservation-notifier/frontend/dist;
    index index.html;

    # Frontend ë¼ìš°íŒ…
    location / {
        try_files $uri $uri/ /index.html;
    }

    # Backend API í”„ë¡ì‹œ
    location /api {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
    }

    # ì •ì  íŒŒì¼ ìºì‹±
    location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg)$ {
        expires 1y;
        add_header Cache-Control "public, immutable";
    }
}
```

#### 4.3 Nginx ì„¤ì • í™œì„±í™”
```bash
# ì‹¬ë³¼ë¦­ ë§í¬ ìƒì„±
sudo ln -s /etc/nginx/sites-available/camping-notifier /etc/nginx/sites-enabled/

# ì„¤ì • í…ŒìŠ¤íŠ¸
sudo nginx -t

# Nginx ì¬ì‹œì‘
sudo systemctl restart nginx
```

#### 4.4 SSL ì¸ì¦ì„œ ì„¤ì¹˜ (Let's Encrypt)
```bash
# Certbot ì„¤ì¹˜
sudo apt-get install certbot python3-certbot-nginx

# SSL ì¸ì¦ì„œ ë°œê¸‰
sudo certbot --nginx -d your-domain.com -d www.your-domain.com

# ìë™ ê°±ì‹  í…ŒìŠ¤íŠ¸
sudo certbot renew --dry-run
```

**SSL ì ìš© í›„ Nginx ì„¤ì • (ìë™ ìƒì„±ë¨)**:
```nginx
server {
    listen 443 ssl http2;
    server_name your-domain.com;

    ssl_certificate /etc/letsencrypt/live/your-domain.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/your-domain.com/privkey.pem;

    # ... (ë‚˜ë¨¸ì§€ ì„¤ì • ë™ì¼)
}

# HTTP to HTTPS ë¦¬ë‹¤ì´ë ‰íŠ¸
server {
    listen 80;
    server_name your-domain.com;
    return 301 https://$server_name$request_uri;
}
```

### 5. ë°©í™”ë²½ ì„¤ì •

#### UFW (Ubuntu)
```bash
# HTTP/HTTPS í—ˆìš©
sudo ufw allow 'Nginx Full'

# SSH í—ˆìš© (í•„ìˆ˜!)
sudo ufw allow ssh

# ë°©í™”ë²½ í™œì„±í™”
sudo ufw enable

# ìƒíƒœ í™•ì¸
sudo ufw status
```

#### FirewallD (CentOS)
```bash
sudo firewall-cmd --permanent --add-service=http
sudo firewall-cmd --permanent --add-service=https
sudo firewall-cmd --reload
```

### 6. ë°°í¬ í™•ì¸

#### Backend í™•ì¸
```bash
# í—¬ìŠ¤ ì²´í¬
curl http://localhost:3000/health

# ì‘ë‹µ ì˜ˆì‹œ
# {"status":"ok","timestamp":"2025-10-10T12:00:00.000Z"}
```

#### Frontend í™•ì¸
```bash
# ë¸Œë¼ìš°ì €ì—ì„œ ì ‘ì†
http://your-domain.com
# ë˜ëŠ”
https://your-domain.com
```

#### PM2 í™•ì¸
```bash
pm2 status
pm2 logs camping-backend --lines 50
```

---

## ì‹œìŠ¤í…œ ì„¤ì •

### 1. Firebase ì„¤ì •

#### 1.1 Firestore ë°ì´í„°ë² ì´ìŠ¤ ìƒì„±
1. Firebase Console â†’ Firestore Database
2. "ë°ì´í„°ë² ì´ìŠ¤ ë§Œë“¤ê¸°" í´ë¦­
3. ìœ„ì¹˜ ì„ íƒ (asia-northeast3 - ì„œìš¸)
4. í”„ë¡œë•ì…˜ ëª¨ë“œë¡œ ì‹œì‘

#### 1.2 Firestore Security Rules

```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // Helper functions
    function isSignedIn() {
      return request.auth != null;
    }

    function isOwner(userId) {
      return isSignedIn() && request.auth.uid == userId;
    }

    // users ì»¬ë ‰ì…˜
    match /users/{userId} {
      allow read, write: if isOwner(userId);
    }

    // userSettings ì»¬ë ‰ì…˜
    match /userSettings/{settingId} {
      allow read, write: if isSignedIn() &&
        resource.data.userId == request.auth.uid;
      allow create: if isSignedIn() &&
        request.resource.data.userId == request.auth.uid;
    }

    // availability ì»¬ë ‰ì…˜ (ì½ê¸°ë§Œ í—ˆìš©)
    match /availability/{availId} {
      allow read: if isSignedIn();
      allow write: if false;  // Backendì—ì„œë§Œ ì“°ê¸°
    }

    // notifications ì»¬ë ‰ì…˜ (ì½ê¸°ë§Œ í—ˆìš©)
    match /notifications/{notifId} {
      allow read: if isSignedIn() &&
        resource.data.userId == request.auth.uid;
      allow write: if false;  // Backendì—ì„œë§Œ ì“°ê¸°
    }

    // scrapingLogs ì»¬ë ‰ì…˜ (ì½ê¸°ë§Œ í—ˆìš©)
    match /scrapingLogs/{logId} {
      allow read: if isSignedIn();
      allow write: if false;  // Backendì—ì„œë§Œ ì“°ê¸°
    }
  }
}
```

#### 1.3 Firestore ì¸ë±ìŠ¤ ìƒì„±

**backend/firestore.indexes.json** íŒŒì¼ ì‚¬ìš©:
```bash
cd backend
firebase deploy --only firestore:indexes
```

ë˜ëŠ” Firebase Consoleì—ì„œ ìˆ˜ë™ ìƒì„±:
1. Firestore â†’ ì¸ë±ìŠ¤ íƒ­
2. ë³µí•© ì¸ë±ìŠ¤ ì¶”ê°€:

**availability ì¸ë±ìŠ¤**:
- campingName (ì˜¤ë¦„ì°¨ìˆœ)
- region (ì˜¤ë¦„ì°¨ìˆœ)
- area (ì˜¤ë¦„ì°¨ìˆœ)
- date (ì˜¤ë¦„ì°¨ìˆœ)

**notifications ì¸ë±ìŠ¤**:
- userId (ì˜¤ë¦„ì°¨ìˆœ)
- sentAt (ë‚´ë¦¼ì°¨ìˆœ)

**scrapingLogs ì¸ë±ìŠ¤**:
- startedAt (ë‚´ë¦¼ì°¨ìˆœ)

#### 1.4 Firebase Authentication ì„¤ì •

1. Firebase Console â†’ Authentication
2. ë¡œê·¸ì¸ ë°©ë²• íƒ­
3. ì´ë©”ì¼/ë¹„ë°€ë²ˆí˜¸ í™œì„±í™”
4. Google ë¡œê·¸ì¸ í™œì„±í™”
5. ìŠ¹ì¸ëœ ë„ë©”ì¸ì— ë³¸ì¸ ë„ë©”ì¸ ì¶”ê°€

### 2. ìŠ¤ì¼€ì¤„ëŸ¬ ì„¤ì •

**backend/src/services/scheduler.service.js**:

```javascript
// ìŠ¤ì¼€ì¤„: ë§¤ë¶„ ì‹¤í–‰
cron.schedule('* * * * *', async () => {
  // ...
});

// ëœë¤ ë”œë ˆì´: 5-20ì´ˆ
const delay = getRandomDelay(5000, 20000);

// Sleep ì‹œê°„: 01:00-08:00 KST
if (isSleepTime(koreaTime)) {
  console.log('ğŸ˜´ Sleep ì‹œê°„ì…ë‹ˆë‹¤. ìŠ¤í¬ë˜í•‘ì„ ê±´ë„ˆëœë‹ˆë‹¤.');
  return;
}
```

**ì„¤ì • ë³€ê²½** (í•„ìš”ì‹œ):
```javascript
// ë§¤ 5ë¶„ë§ˆë‹¤ ì‹¤í–‰
cron.schedule('*/5 * * * *', async () => {
  // ...
});

// Sleep ì‹œê°„ ë³€ê²½ (backend/src/utils/date.js)
export function isSleepTime(date) {
  const hour = date.getHours();
  return hour >= 2 && hour < 9;  // 02:00-09:00ìœ¼ë¡œ ë³€ê²½
}
```

### 3. ì´ë©”ì¼ ì„¤ì •

**backend/src/config/email.js**:

```javascript
const transporter = nodemailer.createTransporter({
  service: 'gmail',
  auth: {
    user: process.env.EMAIL_USER,
    pass: process.env.EMAIL_APP_PASSWORD
  }
});
```

**Gmail ì¼ì¼ ì „ì†¡ ì œí•œ**:
- ë¬´ë£Œ Gmail: 500í†µ/ì¼
- Google Workspace: 2,000í†µ/ì¼

**ëŒ€ì•ˆ SMTP ì„œë¹„ìŠ¤** (ëŒ€ëŸ‰ ì „ì†¡ í•„ìš”ì‹œ):
- SendGrid
- AWS SES
- Mailgun

### 4. ë¡œê·¸ ì„¤ì •

**backend/src/utils/logger.js**:

í˜„ì¬ëŠ” console.log ì‚¬ìš©. í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œëŠ” Winston ë˜ëŠ” Pino ì‚¬ìš© ê¶Œì¥.

**Winston ì„¤ì • ì˜ˆì‹œ**:
```bash
npm install winston
```

```javascript
import winston from 'winston';

const logger = winston.createLogger({
  level: 'info',
  format: winston.format.json(),
  transports: [
    new winston.transports.File({ filename: 'error.log', level: 'error' }),
    new winston.transports.File({ filename: 'combined.log' }),
  ],
});

if (process.env.NODE_ENV !== 'production') {
  logger.add(new winston.transports.Console({
    format: winston.format.simple(),
  }));
}

export default logger;
```

---

## ì‹œìŠ¤í…œ ìš´ì˜

### 1. ì¼ìƒ ìš´ì˜ ì‘ì—…

#### ë§¤ì¼ ì²´í¬ë¦¬ìŠ¤íŠ¸
- [ ] PM2 í”„ë¡œì„¸ìŠ¤ ìƒíƒœ í™•ì¸
- [ ] ìµœê·¼ ìŠ¤í¬ë˜í•‘ ë¡œê·¸ í™•ì¸
- [ ] ì—ëŸ¬ ë¡œê·¸ í™•ì¸
- [ ] ë””ìŠ¤í¬ ì‚¬ìš©ëŸ‰ í™•ì¸
- [ ] ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ í™•ì¸

#### ë§¤ì£¼ ì²´í¬ë¦¬ìŠ¤íŠ¸
- [ ] Firestore ë°ì´í„° í¬ê¸° í™•ì¸
- [ ] ë°±ì—… ìƒíƒœ í™•ì¸
- [ ] SSL ì¸ì¦ì„œ ë§Œë£Œì¼ í™•ì¸
- [ ] ì‹œìŠ¤í…œ ë³´ì•ˆ ì—…ë°ì´íŠ¸

#### ë§¤ì›” ì²´í¬ë¦¬ìŠ¤íŠ¸
- [ ] ì „ì²´ ì‹œìŠ¤í…œ ì ê²€
- [ ] ì„±ëŠ¥ ë¶„ì„
- [ ] ì‚¬ìš©ì í”¼ë“œë°± ê²€í† 
- [ ] ì½”ë“œ ì—…ë°ì´íŠ¸ ê²€í† 

### 2. ì¼ìƒ ëª…ë ¹ì–´

#### ì‹œìŠ¤í…œ ìƒíƒœ í™•ì¸
```bash
# PM2 í”„ë¡œì„¸ìŠ¤ í™•ì¸
pm2 status

# ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰ í™•ì¸
pm2 monit

# ìµœê·¼ ë¡œê·¸ í™•ì¸
pm2 logs camping-backend --lines 100

# ì‹¤ì‹œê°„ ë¡œê·¸
pm2 logs camping-backend
```

#### Backend ê´€ë¦¬
```bash
# ì¬ì‹œì‘
pm2 restart camping-backend

# ì •ì§€
pm2 stop camping-backend

# ì‹œì‘
pm2 start camping-backend

# ì‚­ì œ
pm2 delete camping-backend

# ë¡œê·¸ ë¹„ìš°ê¸°
pm2 flush
```

#### ì‹œìŠ¤í…œ ë¦¬ì†ŒìŠ¤ í™•ì¸
```bash
# CPU/ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰
htop
# ë˜ëŠ”
top

# ë””ìŠ¤í¬ ì‚¬ìš©ëŸ‰
df -h

# íŠ¹ì • ë””ë ‰í† ë¦¬ í¬ê¸°
du -sh /var/www/camping-reservation-notifier

# ë©”ëª¨ë¦¬ ìƒíƒœ
free -h
```

#### Nginx ê´€ë¦¬
```bash
# ì„¤ì • í…ŒìŠ¤íŠ¸
sudo nginx -t

# ì¬ì‹œì‘
sudo systemctl restart nginx

# ë¦¬ë¡œë“œ (ë¬´ì¤‘ë‹¨)
sudo systemctl reload nginx

# ë¡œê·¸ í™•ì¸
sudo tail -f /var/log/nginx/access.log
sudo tail -f /var/log/nginx/error.log
```

### 3. ì½”ë“œ ì—…ë°ì´íŠ¸

#### Gitì—ì„œ ìµœì‹  ì½”ë“œ ê°€ì ¸ì˜¤ê¸°
```bash
cd /var/www/camping-reservation-notifier

# ë°±ì—… (ì„ íƒì‚¬í•­)
git branch backup-$(date +%Y%m%d)

# ìµœì‹  ì½”ë“œ ê°€ì ¸ì˜¤ê¸°
git pull origin main

# Backend ì—…ë°ì´íŠ¸
cd backend
npm install
pm2 restart camping-backend

# Frontend ì—…ë°ì´íŠ¸
cd ../frontend
npm install
npm run build

# Nginx ì¬ì‹œì‘ (í•„ìš”ì‹œ)
sudo systemctl reload nginx
```

#### ë¡¤ë°± (ë¬¸ì œ ë°œìƒì‹œ)
```bash
cd /var/www/camping-reservation-notifier

# ì´ì „ ì»¤ë°‹ìœ¼ë¡œ ë³µêµ¬
git log --oneline  # ì»¤ë°‹ í•´ì‹œ í™•ì¸
git checkout <commit-hash>

# Backend ì¬ì‹œì‘
cd backend
npm install
pm2 restart camping-backend

# Frontend ì¬ë¹Œë“œ
cd ../frontend
npm install
npm run build
```

---

## ëª¨ë‹ˆí„°ë§ ë° ë¡œê·¸ ê´€ë¦¬

### 1. ë¡œê·¸ ìœ„ì¹˜

#### PM2 ë¡œê·¸
```bash
# ë¡œê·¸ ê²½ë¡œ
~/.pm2/logs/

# camping-backend ë¡œê·¸
~/.pm2/logs/camping-backend-out.log  # stdout
~/.pm2/logs/camping-backend-error.log  # stderr
```

#### Nginx ë¡œê·¸
```bash
/var/log/nginx/access.log  # ì ‘ê·¼ ë¡œê·¸
/var/log/nginx/error.log   # ì—ëŸ¬ ë¡œê·¸
```

### 2. ë¡œê·¸ í™•ì¸

#### ì‹¤ì‹œê°„ ë¡œê·¸ ëª¨ë‹ˆí„°ë§
```bash
# PM2 ë¡œê·¸
pm2 logs camping-backend

# Nginx ì ‘ê·¼ ë¡œê·¸
sudo tail -f /var/log/nginx/access.log

# Nginx ì—ëŸ¬ ë¡œê·¸
sudo tail -f /var/log/nginx/error.log

# ì—¬ëŸ¬ ë¡œê·¸ ë™ì‹œ í™•ì¸
tail -f ~/.pm2/logs/camping-backend-*.log
```

#### íŠ¹ì • í‚¤ì›Œë“œ ê²€ìƒ‰
```bash
# ì—ëŸ¬ ê²€ìƒ‰
grep "ERROR" ~/.pm2/logs/camping-backend-error.log

# ìµœê·¼ 1ì‹œê°„ ì—ëŸ¬
grep "ERROR" ~/.pm2/logs/camping-backend-error.log | tail -100

# ìŠ¤í¬ë˜í•‘ ì„±ê³µ ë¡œê·¸
grep "âœ… ìŠ¤í¬ë˜í•‘ ì™„ë£Œ" ~/.pm2/logs/camping-backend-out.log
```

### 3. Firestore ë¡œê·¸ í™•ì¸

#### ìŠ¤í¬ë˜í•‘ ë¡œê·¸ ì¡°íšŒ (Firebase Console)
1. Firestore â†’ scrapingLogs ì»¬ë ‰ì…˜
2. ìµœê·¼ ì‹¤í–‰ í™•ì¸
3. status: "error" í•„í„°ë§í•˜ì—¬ ì—ëŸ¬ í™•ì¸

#### ì•Œë¦¼ ë¡œê·¸ ì¡°íšŒ
1. Firestore â†’ notifications ì»¬ë ‰ì…˜
2. userIdë¡œ í•„í„°ë§
3. sentAt ì •ë ¬

### 4. ë¡œê·¸ ë¡œí…Œì´ì…˜

**PM2 ë¡œê·¸ ë¡œí…Œì´ì…˜**:
```bash
# pm2-logrotate ì„¤ì¹˜
pm2 install pm2-logrotate

# ì„¤ì •
pm2 set pm2-logrotate:max_size 10M      # ìµœëŒ€ íŒŒì¼ í¬ê¸°
pm2 set pm2-logrotate:retain 7          # ë³´ê´€ ì¼ìˆ˜
pm2 set pm2-logrotate:compress true     # ì••ì¶• í™œì„±í™”
```

**Nginx ë¡œê·¸ ë¡œí…Œì´ì…˜** (logrotate ì‚¬ìš©):
```bash
sudo nano /etc/logrotate.d/nginx
```

```
/var/log/nginx/*.log {
    daily
    missingok
    rotate 14
    compress
    delaycompress
    notifempty
    create 0640 www-data adm
    sharedscripts
    postrotate
        [ -f /var/run/nginx.pid ] && kill -USR1 `cat /var/run/nginx.pid`
    endscript
}
```

### 5. ì•Œë¦¼ ë° ê²½ê³ 

#### PM2 ì•Œë¦¼ ì„¤ì •
```bash
# pm2-slack ì„¤ì¹˜ (Slack ì•Œë¦¼)
pm2 install pm2-slack

# Webhook URL ì„¤ì •
pm2 set pm2-slack:slack_url https://hooks.slack.com/services/YOUR/WEBHOOK/URL
```

#### ì´ë©”ì¼ ì•Œë¦¼ (í”„ë¡œì„¸ìŠ¤ í¬ë˜ì‹œ ì‹œ)
PM2 Keymetrics ì‚¬ìš© ë˜ëŠ” ì»¤ìŠ¤í…€ ìŠ¤í¬ë¦½íŠ¸ ì‘ì„±

---

## ë°±ì—… ë° ë³µêµ¬

### 1. Firestore ë°±ì—…

#### ìë™ ë°±ì—… (Firebase Console)
1. Firebase Console â†’ Firestore â†’ ë°±ì—…
2. ì˜ˆì•½ëœ ë°±ì—… ì„¤ì •
3. Cloud Storage ë²„í‚· ì§€ì •

#### ìˆ˜ë™ ë‚´ë³´ë‚´ê¸° (gcloud CLI)
```bash
# gcloud ì„¤ì¹˜
curl https://sdk.cloud.google.com | bash

# ì¸ì¦
gcloud auth login

# í”„ë¡œì íŠ¸ ì„¤ì •
gcloud config set project camping-scraper-prod

# Firestore ë‚´ë³´ë‚´ê¸°
gcloud firestore export gs://your-bucket-name/backups/$(date +%Y%m%d)
```

#### ë³µì›
```bash
gcloud firestore import gs://your-bucket-name/backups/20251010
```

### 2. ì½”ë“œ ë°±ì—…

#### Git ë°±ì—… (ìë™)
- GitHubì— ì½”ë“œê°€ ìë™ìœ¼ë¡œ ë°±ì—…ë¨

#### ì„œë²„ íŒŒì¼ ë°±ì—…
```bash
# ì „ì²´ í”„ë¡œì íŠ¸ ë°±ì—…
tar -czf camping-backup-$(date +%Y%m%d).tar.gz \
  /var/www/camping-reservation-notifier \
  --exclude=node_modules \
  --exclude=.git

# ë°±ì—… íŒŒì¼ì„ ì•ˆì „í•œ ìœ„ì¹˜ë¡œ ì´ë™
mv camping-backup-*.tar.gz /backup/
```

#### ì •ê¸° ë°±ì—… (cron)
```bash
crontab -e
```

```cron
# ë§¤ì¼ ìƒˆë²½ 2ì‹œ ë°±ì—…
0 2 * * * /path/to/backup-script.sh
```

**backup-script.sh**:
```bash
#!/bin/bash
BACKUP_DIR="/backup"
DATE=$(date +%Y%m%d)

# ì½”ë“œ ë°±ì—…
tar -czf $BACKUP_DIR/code-$DATE.tar.gz \
  /var/www/camping-reservation-notifier \
  --exclude=node_modules \
  --exclude=.git

# 7ì¼ ì´ìƒ ëœ ë°±ì—… ì‚­ì œ
find $BACKUP_DIR -name "code-*.tar.gz" -mtime +7 -delete

echo "Backup completed: $DATE"
```

### 3. í™˜ê²½ ë³€ìˆ˜ ë°±ì—…

```bash
# .env íŒŒì¼ ë°±ì—… (ì•”í˜¸í™” ê¶Œì¥)
cp backend/.env backend/.env.backup

# ì•ˆì „í•œ ìœ„ì¹˜ì— ë³´ê´€ (Gitì—ëŠ” ì ˆëŒ€ ì˜¬ë¦¬ì§€ ë§ ê²ƒ!)
```

### 4. ë³µêµ¬ ì ˆì°¨

#### ì „ì²´ ì‹œìŠ¤í…œ ë³µêµ¬
```bash
# 1. ì½”ë“œ ë³µêµ¬
cd /var/www
tar -xzf /backup/code-20251010.tar.gz

# 2. íŒ¨í‚¤ì§€ ì¬ì„¤ì¹˜
cd camping-reservation-notifier/backend
npm install

cd ../frontend
npm install
npm run build

# 3. PM2 ì¬ì‹œì‘
pm2 restart camping-backend

# 4. Nginx ì¬ì‹œì‘
sudo systemctl restart nginx
```

#### Firestore ë°ì´í„° ë³µêµ¬
```bash
gcloud firestore import gs://your-bucket-name/backups/20251010
```

---

## íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### 1. Backend ë¬¸ì œ

#### ì¦ìƒ: Backendê°€ ì‹œì‘ë˜ì§€ ì•ŠìŒ

**ì›ì¸ í™•ì¸**:
```bash
# PM2 ë¡œê·¸ í™•ì¸
pm2 logs camping-backend --lines 50

# ì§ì ‘ ì‹¤í–‰ìœ¼ë¡œ ì—ëŸ¬ í™•ì¸
cd backend
node src/app.js
```

**ì¼ë°˜ì ì¸ ì›ì¸**:
1. **í¬íŠ¸ ì¶©ëŒ**:
   ```bash
   # í¬íŠ¸ ì‚¬ìš© í™•ì¸
   sudo lsof -i :3000
   sudo netstat -tulpn | grep :3000

   # í”„ë¡œì„¸ìŠ¤ ì¢…ë£Œ
   sudo kill -9 <PID>
   ```

2. **í™˜ê²½ ë³€ìˆ˜ ëˆ„ë½**:
   ```bash
   # .env íŒŒì¼ í™•ì¸
   cat backend/.env

   # í•„ìˆ˜ ë³€ìˆ˜ í™•ì¸
   # PORT, NODE_ENV, EMAIL_USER, EMAIL_APP_PASSWORD
   ```

3. **Firebase ì„œë¹„ìŠ¤ ê³„ì • íŒŒì¼ ëˆ„ë½**:
   ```bash
   # íŒŒì¼ ì¡´ì¬ í™•ì¸
   ls -la camping-scraper-prod-firebase-*.json

   # ê²½ë¡œ í™•ì¸ (backend/src/config/firebase.js)
   ```

4. **íŒ¨í‚¤ì§€ ì„¤ì¹˜ ì˜¤ë¥˜**:
   ```bash
   # node_modules ì‚­ì œ í›„ ì¬ì„¤ì¹˜
   rm -rf node_modules package-lock.json
   npm install
   ```

#### ì¦ìƒ: ìŠ¤í¬ë˜í•‘ì´ ì‹¤í–‰ë˜ì§€ ì•ŠìŒ

**ì›ì¸ í™•ì¸**:
```bash
# ë¡œê·¸ í™•ì¸
pm2 logs camping-backend | grep "ìŠ¤í¬ë˜í•‘"

# Firestore scrapingLogs í™•ì¸
# Firebase Console â†’ scrapingLogs ì»¬ë ‰ì…˜
```

**ì¼ë°˜ì ì¸ ì›ì¸**:
1. **Sleep ì‹œê°„ (01:00-08:00 KST)**:
   - ë¡œê·¸ì— "ğŸ˜´ Sleep ì‹œê°„ì…ë‹ˆë‹¤" ë©”ì‹œì§€ í™•ì¸
   - ì •ìƒ ë™ì‘

2. **í™œì„± ì„¤ì • ì—†ìŒ**:
   - ë¡œê·¸ì— "â­ï¸ í™œì„±í™”ëœ ì„¤ì •ì´ ì—†ìŠµë‹ˆë‹¤" ë©”ì‹œì§€
   - userSettings ì»¬ë ‰ì…˜ì— isActive: trueì¸ ì„¤ì • í™•ì¸

3. **Playwright ì‹¤í–‰ ì˜¤ë¥˜**:
   ```bash
   # Playwright ë¸Œë¼ìš°ì € ì¬ì„¤ì¹˜
   cd backend
   npx playwright install chromium

   # ì‹œìŠ¤í…œ ì˜ì¡´ì„± ì„¤ì¹˜
   npx playwright install-deps
   ```

4. **íƒ€ê²Ÿ ì‚¬ì´íŠ¸ êµ¬ì¡° ë³€ê²½**:
   - mirihae.com ì‚¬ì´íŠ¸ êµ¬ì¡°ê°€ ë³€ê²½ë˜ì—ˆì„ ìˆ˜ ìˆìŒ
   - backend/src/services/scraper.service.js íŒŒì‹± ë¡œì§ ìˆ˜ì • í•„ìš”

#### ì¦ìƒ: ì•Œë¦¼ ì´ë©”ì¼ì´ ì „ì†¡ë˜ì§€ ì•ŠìŒ

**ì›ì¸ í™•ì¸**:
```bash
# ë¡œê·¸ í™•ì¸
pm2 logs camping-backend | grep "ì´ë©”ì¼"

# Firestore notifications í™•ì¸
# Firebase Console â†’ notifications ì»¬ë ‰ì…˜
```

**ì¼ë°˜ì ì¸ ì›ì¸**:
1. **Gmail ì¸ì¦ ì‹¤íŒ¨**:
   ```bash
   # .env í™•ì¸
   cat backend/.env | grep EMAIL

   # Gmail App Password ì¬ìƒì„±
   # Google ê³„ì • â†’ ë³´ì•ˆ â†’ ì•± ë¹„ë°€ë²ˆí˜¸
   ```

2. **Gmail ì „ì†¡ ì œí•œ**:
   - ì¼ì¼ 500í†µ ì œí•œ í™•ì¸
   - Google Workspace ê³„ì • ì‚¬ìš© ê²€í† 

3. **24ì‹œê°„ ì¤‘ë³µ ì•Œë¦¼ ë°©ì§€**:
   - ë™ì¼ ìº í•‘ì¥-êµ¬ì—­-ë‚ ì§œëŠ” 24ì‹œê°„ ë‚´ 1íšŒë§Œ ì „ì†¡
   - notifications ì»¬ë ‰ì…˜ì—ì„œ ìµœê·¼ ì•Œë¦¼ í™•ì¸

### 2. Frontend ë¬¸ì œ

#### ì¦ìƒ: ë¡œê·¸ì¸ì´ ë˜ì§€ ì•ŠìŒ

**ì›ì¸ í™•ì¸**:
1. **Firebase ì—°ê²° í™•ì¸**:
   - ë¸Œë¼ìš°ì € ê°œë°œì ë„êµ¬ â†’ Console í™•ì¸
   - Network íƒ­ì—ì„œ Firebase API í˜¸ì¶œ í™•ì¸

2. **Firebase ì„¤ì • í™•ì¸**:
   ```bash
   # frontend/src/services/firebase.js í™•ì¸
   cat frontend/src/services/firebase.js
   ```

3. **ìŠ¹ì¸ëœ ë„ë©”ì¸ í™•ì¸**:
   - Firebase Console â†’ Authentication â†’ ì„¤ì • â†’ ìŠ¹ì¸ëœ ë„ë©”ì¸
   - ë³¸ì¸ ë„ë©”ì¸ì´ ì¶”ê°€ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸

#### ì¦ìƒ: API í˜¸ì¶œ ì‹¤íŒ¨

**ì›ì¸ í™•ì¸**:
```bash
# ë¸Œë¼ìš°ì € ê°œë°œì ë„êµ¬ â†’ Console
# 401 Unauthorized: Firebase í† í° ë¬¸ì œ
# 404 Not Found: API ê²½ë¡œ ë¬¸ì œ
# 500 Internal Server Error: Backend ì—ëŸ¬
```

**ì¼ë°˜ì ì¸ ì›ì¸**:
1. **Backend API URL ì˜¤ë¥˜**:
   ```bash
   # frontend/.env í™•ì¸
   cat frontend/.env

   # VITE_API_URLì´ ì˜¬ë°”ë¥¸ì§€ í™•ì¸
   # http://your-domain.com/api (ë’¤ì— /api í•„ìˆ˜)
   ```

2. **CORS ë¬¸ì œ**:
   - Backendì—ì„œ Frontend ë„ë©”ì¸ í—ˆìš© í™•ì¸
   - backend/src/app.jsì˜ CORS ì„¤ì • í™•ì¸

3. **Nginx í”„ë¡ì‹œ ì„¤ì • ì˜¤ë¥˜**:
   ```bash
   # Nginx ì„¤ì • í™•ì¸
   sudo nano /etc/nginx/sites-available/camping-notifier

   # location /api ë¸”ë¡ í™•ì¸
   # proxy_pass http://localhost:3000; í™•ì¸
   ```

#### ì¦ìƒ: í™”ë©´ì´ í°ìƒ‰ìœ¼ë¡œë§Œ í‘œì‹œë¨

**ì›ì¸ í™•ì¸**:
```bash
# ë¸Œë¼ìš°ì € ê°œë°œì ë„êµ¬ â†’ Consoleì—ì„œ ì—ëŸ¬ í™•ì¸
```

**ì¼ë°˜ì ì¸ ì›ì¸**:
1. **ë¹Œë“œ ì˜¤ë¥˜**:
   ```bash
   cd frontend
   npm run build
   # ë¹Œë“œ ì—ëŸ¬ í™•ì¸
   ```

2. **íŒŒì¼ ê²½ë¡œ ë¬¸ì œ**:
   ```bash
   # Nginx root ê²½ë¡œ í™•ì¸
   sudo nano /etc/nginx/sites-available/camping-notifier

   # root /var/www/camping-reservation-notifier/frontend/dist;
   # ê²½ë¡œê°€ ì •í™•í•œì§€ í™•ì¸
   ```

3. **JavaScript ì‹¤í–‰ ì˜¤ë¥˜**:
   - ë¸Œë¼ìš°ì € Consoleì—ì„œ ì—ëŸ¬ ë©”ì‹œì§€ í™•ì¸
   - React ì»´í¬ë„ŒíŠ¸ ì—ëŸ¬

### 3. Firestore ë¬¸ì œ

#### ì¦ìƒ: Firestore ì“°ê¸° ì‹¤íŒ¨

**ì›ì¸ í™•ì¸**:
```bash
# Backend ë¡œê·¸ í™•ì¸
pm2 logs camping-backend | grep "Firestore"
```

**ì¼ë°˜ì ì¸ ì›ì¸**:
1. **Security Rules ìœ„ë°˜**:
   - Firebase Console â†’ Firestore â†’ ê·œì¹™ íƒ­
   - ê·œì¹™ì´ ë„ˆë¬´ ì œí•œì ì¸ì§€ í™•ì¸

2. **ì„œë¹„ìŠ¤ ê³„ì • ê¶Œí•œ ë¶€ì¡±**:
   - Firebase Console â†’ í”„ë¡œì íŠ¸ ì„¤ì • â†’ ì„œë¹„ìŠ¤ ê³„ì •
   - ì—­í• ì´ "í¸ì§‘ì" ì´ìƒì¸ì§€ í™•ì¸

3. **í• ë‹¹ëŸ‰ ì´ˆê³¼**:
   - Firebase Console â†’ Firestore â†’ ì‚¬ìš©ëŸ‰
   - ì½ê¸°/ì“°ê¸° ì œí•œ í™•ì¸

#### ì¦ìƒ: Firestore ì—°ê²° ëŠë¦¼

**ì›ì¸**:
- Firestore ë¦¬ì „ì´ ë©€ë¦¬ ìˆìŒ
- ì¸ë±ìŠ¤ ëˆ„ë½

**í•´ê²°**:
1. **ì¸ë±ìŠ¤ ìƒì„±**:
   - Firebase Console â†’ Firestore â†’ ì¸ë±ìŠ¤ íƒ­
   - í•„ìš”í•œ ë³µí•© ì¸ë±ìŠ¤ ìƒì„±

2. **ì¿¼ë¦¬ ìµœì í™”**:
   - ë¶ˆí•„ìš”í•œ ì¿¼ë¦¬ ì œê±°
   - í˜ì´ì§€ë„¤ì´ì…˜ ì ìš©

### 4. ë„¤íŠ¸ì›Œí¬ ë¬¸ì œ

#### ì¦ìƒ: ì™¸ë¶€ì—ì„œ ì ‘ì† ì•ˆ ë¨

**ì›ì¸ í™•ì¸**:
```bash
# ë°©í™”ë²½ í™•ì¸
sudo ufw status

# Nginx ìƒíƒœ í™•ì¸
sudo systemctl status nginx

# í¬íŠ¸ ë¦¬ìŠ¤ë‹ í™•ì¸
sudo netstat -tulpn | grep :80
sudo netstat -tulpn | grep :443
```

**í•´ê²°**:
```bash
# ë°©í™”ë²½ í¬íŠ¸ ì—´ê¸°
sudo ufw allow 'Nginx Full'

# Nginx ì¬ì‹œì‘
sudo systemctl restart nginx
```

#### ì¦ìƒ: HTTPS ì¸ì¦ì„œ ì˜¤ë¥˜

**ì›ì¸ í™•ì¸**:
```bash
# ì¸ì¦ì„œ ë§Œë£Œì¼ í™•ì¸
sudo certbot certificates
```

**í•´ê²°**:
```bash
# ì¸ì¦ì„œ ê°±ì‹ 
sudo certbot renew

# Nginx ì¬ì‹œì‘
sudo systemctl restart nginx
```

---

## ë³´ì•ˆ ê´€ë¦¬

### 1. í™˜ê²½ ë³€ìˆ˜ ë³´ì•ˆ

#### ì¤‘ìš” íŒŒì¼ ê¶Œí•œ ì„¤ì •
```bash
# .env íŒŒì¼ ê¶Œí•œ
chmod 600 backend/.env
chmod 600 frontend/.env

# Firebase ì„œë¹„ìŠ¤ ê³„ì • íŒŒì¼
chmod 600 camping-scraper-prod-firebase-*.json

# ì†Œìœ ì í™•ì¸
ls -la backend/.env
# -rw------- 1 user user ... backend/.env
```

#### í™˜ê²½ ë³€ìˆ˜ ì•”í˜¸í™” (ì„ íƒì‚¬í•­)
```bash
# ansible-vault ì‚¬ìš©
ansible-vault encrypt backend/.env

# ë³µí˜¸í™”
ansible-vault decrypt backend/.env
```

### 2. Firebase ë³´ì•ˆ

#### Security Rules ê²€í† 
- ìµœì†Œ ê¶Œí•œ ì›ì¹™ ì ìš©
- ì¸ì¦ëœ ì‚¬ìš©ìë§Œ ì ‘ê·¼
- ìì‹ ì˜ ë°ì´í„°ë§Œ ì½ê¸°/ì“°ê¸°

#### ì„œë¹„ìŠ¤ ê³„ì • í‚¤ ê´€ë¦¬
- ì ˆëŒ€ Gitì— ì»¤ë°‹í•˜ì§€ ë§ ê²ƒ
- ì •ê¸°ì ìœ¼ë¡œ í‚¤ ë¡œí…Œì´ì…˜
- í•„ìš”í•œ ê¶Œí•œë§Œ ë¶€ì—¬

### 3. SSH ë³´ì•ˆ

#### SSH í‚¤ ì¸ì¦ ì„¤ì •
```bash
# ë¹„ë°€ë²ˆí˜¸ ë¡œê·¸ì¸ ë¹„í™œì„±í™”
sudo nano /etc/ssh/sshd_config

# ì„¤ì • ë³€ê²½
PasswordAuthentication no
PubkeyAuthentication yes

# SSH ì¬ì‹œì‘
sudo systemctl restart sshd
```

#### Fail2Ban ì„¤ì¹˜ (ë¬´ì°¨ë³„ ëŒ€ì… ê³µê²© ë°©ì–´)
```bash
sudo apt-get install fail2ban

# ì„¤ì •
sudo nano /etc/fail2ban/jail.local
```

```ini
[sshd]
enabled = true
port = ssh
filter = sshd
logpath = /var/log/auth.log
maxretry = 3
bantime = 3600
```

```bash
sudo systemctl restart fail2ban
```

### 4. ì„œë²„ ë³´ì•ˆ ì—…ë°ì´íŠ¸

#### ìë™ ë³´ì•ˆ ì—…ë°ì´íŠ¸
```bash
# Ubuntu
sudo apt-get install unattended-upgrades
sudo dpkg-reconfigure --priority=low unattended-upgrades

# ì„¤ì • í™•ì¸
cat /etc/apt/apt.conf.d/50unattended-upgrades
```

#### ìˆ˜ë™ ì—…ë°ì´íŠ¸
```bash
# íŒ¨í‚¤ì§€ ëª©ë¡ ì—…ë°ì´íŠ¸
sudo apt-get update

# ë³´ì•ˆ ì—…ë°ì´íŠ¸ë§Œ ì„¤ì¹˜
sudo apt-get upgrade

# ì „ì²´ ì—…ê·¸ë ˆì´ë“œ
sudo apt-get dist-upgrade
```

### 5. ì• í”Œë¦¬ì¼€ì´ì…˜ ë³´ì•ˆ

#### Node.js íŒ¨í‚¤ì§€ ì·¨ì•½ì  ê²€ì‚¬
```bash
cd backend
npm audit

# ìë™ ìˆ˜ì •
npm audit fix

# ê°•ì œ ìˆ˜ì • (ì£¼ì˜!)
npm audit fix --force
```

#### ì˜ì¡´ì„± ì—…ë°ì´íŠ¸
```bash
# ìµœì‹  ë²„ì „ í™•ì¸
npm outdated

# ì—…ë°ì´íŠ¸
npm update

# íŠ¹ì • íŒ¨í‚¤ì§€ ì—…ë°ì´íŠ¸
npm install express@latest
```

### 6. Nginx ë³´ì•ˆ

#### HTTP í—¤ë” ë³´ì•ˆ ì„¤ì •
```nginx
# /etc/nginx/sites-available/camping-notifier

server {
    # ... ê¸°ì¡´ ì„¤ì • ...

    # ë³´ì•ˆ í—¤ë” ì¶”ê°€
    add_header X-Frame-Options "SAMEORIGIN" always;
    add_header X-Content-Type-Options "nosniff" always;
    add_header X-XSS-Protection "1; mode=block" always;
    add_header Referrer-Policy "no-referrer-when-downgrade" always;
    add_header Content-Security-Policy "default-src 'self' https:; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://www.gstatic.com https://www.googleapis.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https:;" always;

    # ì„œë²„ ë²„ì „ ìˆ¨ê¸°ê¸°
    server_tokens off;
}
```

#### Rate Limiting
```nginx
# /etc/nginx/nginx.conf

http {
    # Rate limit zone ì •ì˜
    limit_req_zone $binary_remote_addr zone=api_limit:10m rate=10r/s;

    # ... ê¸°íƒ€ ì„¤ì • ...
}
```

```nginx
# /etc/nginx/sites-available/camping-notifier

location /api {
    # Rate limiting ì ìš©
    limit_req zone=api_limit burst=20 nodelay;

    # ... í”„ë¡ì‹œ ì„¤ì • ...
}
```

---

## ì„±ëŠ¥ ìµœì í™”

### 1. Backend ìµœì í™”

#### PM2 í´ëŸ¬ìŠ¤í„° ëª¨ë“œ
```bash
# ecosystem.config.js ìƒì„±
nano backend/ecosystem.config.js
```

```javascript
module.exports = {
  apps: [{
    name: 'camping-backend',
    script: './src/app.js',
    instances: 2,  // CPU ì½”ì–´ ìˆ˜ì— ë§ê²Œ ì¡°ì •
    exec_mode: 'cluster',
    env: {
      NODE_ENV: 'production'
    }
  }]
};
```

```bash
# í´ëŸ¬ìŠ¤í„° ëª¨ë“œë¡œ ì‹œì‘
pm2 start backend/ecosystem.config.js
```

#### ë©”ëª¨ë¦¬ ì œí•œ ì„¤ì •
```bash
pm2 start src/app.js --name camping-backend --max-memory-restart 500M
```

### 2. Firestore ìµœì í™”

#### ì¿¼ë¦¬ ìµœì í™”
```javascript
// Bad: ëª¨ë“  ë¬¸ì„œ ê°€ì ¸ì˜¨ í›„ í•„í„°ë§
const allDocs = await db.collection('availability').get();
const filtered = allDocs.docs.filter(doc => doc.data().date > today);

// Good: ì¿¼ë¦¬ì—ì„œ í•„í„°ë§
const query = db.collection('availability')
  .where('date', '>', today)
  .limit(100);
const docs = await query.get();
```

#### ì¸ë±ìŠ¤ í™œìš©
- ë³µí•© ì¿¼ë¦¬ì— ì¸ë±ìŠ¤ ìƒì„±
- Firebase Consoleì—ì„œ ì¸ë±ìŠ¤ ìë™ ì œì•ˆ í™œìš©

#### í˜ì´ì§€ë„¤ì´ì…˜
```javascript
// í˜ì´ì§€ë„¤ì´ì…˜ ì˜ˆì‹œ
const query = db.collection('availability')
  .orderBy('date')
  .limit(50)
  .startAfter(lastDoc);
```

### 3. Frontend ìµœì í™”

#### í”„ë¡œë•ì…˜ ë¹Œë“œ ìµœì í™”
```bash
# ë¹Œë“œì‹œ ì†ŒìŠ¤ë§µ ë¹„í™œì„±í™”
VITE_SOURCEMAP=false npm run build

# ë²ˆë“¤ í¬ê¸° ë¶„ì„
npm install --save-dev rollup-plugin-visualizer
```

#### ì½”ë“œ ìŠ¤í”Œë¦¬íŒ…
```javascript
// React lazy loading
import { lazy, Suspense } from 'react';

const Dashboard = lazy(() => import('./components/Dashboard'));

function App() {
  return (
    <Suspense fallback={<div>Loading...</div>}>
      <Dashboard />
    </Suspense>
  );
}
```

### 4. Nginx ìµœì í™”

#### Gzip ì••ì¶•
```nginx
# /etc/nginx/nginx.conf

gzip on;
gzip_vary on;
gzip_min_length 1024;
gzip_types text/plain text/css text/xml text/javascript application/x-javascript application/xml+rss application/json;
```

#### ì •ì  íŒŒì¼ ìºì‹±
```nginx
location ~* \.(jpg|jpeg|png|gif|ico|css|js|svg|woff|woff2)$ {
    expires 1y;
    add_header Cache-Control "public, immutable";
}
```

#### ì»¤ë„¥ì…˜ ìµœì í™”
```nginx
# /etc/nginx/nginx.conf

worker_processes auto;
worker_connections 1024;
keepalive_timeout 65;
```

---

## ìœ ì§€ë³´ìˆ˜ ê°€ì´ë“œ

### 1. ì •ê¸° ì ê²€ í•­ëª©

#### ì¼ê°„ ì ê²€
```bash
#!/bin/bash
# daily-check.sh

echo "=== ì¼ì¼ ì ê²€ ì‹œì‘ ==="
echo "ë‚ ì§œ: $(date)"

# PM2 ìƒíƒœ
echo "--- PM2 ìƒíƒœ ---"
pm2 status

# ìµœê·¼ ì—ëŸ¬ ë¡œê·¸
echo "--- ìµœê·¼ ì—ëŸ¬ ë¡œê·¸ ---"
pm2 logs camping-backend --err --lines 10

# ë””ìŠ¤í¬ ì‚¬ìš©ëŸ‰
echo "--- ë””ìŠ¤í¬ ì‚¬ìš©ëŸ‰ ---"
df -h | grep -E "Filesystem|/dev/"

# ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰
echo "--- ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ---"
free -h

echo "=== ì¼ì¼ ì ê²€ ì™„ë£Œ ==="
```

#### ì£¼ê°„ ì ê²€
```bash
#!/bin/bash
# weekly-check.sh

# íŒ¨í‚¤ì§€ ì—…ë°ì´íŠ¸ í™•ì¸
echo "--- íŒ¨í‚¤ì§€ ì—…ë°ì´íŠ¸ í™•ì¸ ---"
cd /var/www/camping-reservation-notifier/backend
npm outdated

cd ../frontend
npm outdated

# SSL ì¸ì¦ì„œ ë§Œë£Œì¼
echo "--- SSL ì¸ì¦ì„œ ---"
sudo certbot certificates

# Firestore ì‚¬ìš©ëŸ‰ (ìˆ˜ë™ í™•ì¸ í•„ìš”)
echo "Firebase Consoleì—ì„œ Firestore ì‚¬ìš©ëŸ‰ í™•ì¸ í•„ìš”"
```

### 2. ìº í•‘ì¥ ì‚¬ì´íŠ¸ ë³€ê²½ ëŒ€ì‘

#### HTML êµ¬ì¡° ë³€ê²½ ê°ì§€
- ìŠ¤í¬ë˜í•‘ ì—ëŸ¬ ë°œìƒì‹œ ì¦‰ì‹œ í™•ì¸
- scrapingLogsì—ì„œ status: "error" í™•ì¸

#### íŒŒì‹± ë¡œì§ ìˆ˜ì •
```bash
# 1. í˜„ì¬ ì‚¬ì´íŠ¸ êµ¬ì¡° í™•ì¸
cd backend
node src/services/scraper.service.js  # í…ŒìŠ¤íŠ¸ ì‹¤í–‰

# 2. scraper.service.js ìˆ˜ì •
nano src/services/scraper.service.js

# 3. ë³€ê²½ì‚¬í•­:
# - HTML ì„ íƒì (.element, dl, dt, dd ë“±)
# - ë°ì´í„° íŒŒì‹± ë¡œì§
# - ì—ëŸ¬ í•¸ë“¤ë§

# 4. í…ŒìŠ¤íŠ¸
npm start

# 5. ë°°í¬
pm2 restart camping-backend
```

### 3. ê¸°ëŠ¥ ì¶”ê°€/ë³€ê²½

#### ìƒˆ ìº í•‘ì¥ ì¶”ê°€
1. scraper.service.jsì— ìƒˆ ìŠ¤í¬ë˜í•‘ ë¡œì§ ì¶”ê°€
2. Frontendì—ì„œ ìº í•‘ì¥ ì„ íƒ ì˜µì…˜ ì¶”ê°€
3. Firestore ë°ì´í„° êµ¬ì¡° í™•ì¥ (í•„ìš”ì‹œ)

#### ì•Œë¦¼ ì±„ë„ ì¶”ê°€ (SMS, ì¹´ì¹´ì˜¤í†¡ ë“±)
1. notification.service.jsì— ìƒˆ ì±„ë„ ë¡œì§ ì¶”ê°€
2. í™˜ê²½ ë³€ìˆ˜ì— API í‚¤ ì¶”ê°€
3. Frontendì—ì„œ ì•Œë¦¼ ì±„ë„ ì„ íƒ UI ì¶”ê°€

### 4. ë°ì´í„°ë² ì´ìŠ¤ ìœ ì§€ë³´ìˆ˜

#### ì˜¤ë˜ëœ ë°ì´í„° ì •ë¦¬
```javascript
// cleanup-script.js
import { db } from './config/firebase.js';

async function cleanupOldData() {
  const thirtyDaysAgo = new Date();
  thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30);

  // 30ì¼ ì´ì „ availability ì‚­ì œ
  const oldDocs = await db.collection('availability')
    .where('scrapedAt', '<', thirtyDaysAgo)
    .get();

  const batch = db.batch();
  oldDocs.forEach(doc => batch.delete(doc.ref));
  await batch.commit();

  console.log(`${oldDocs.size} documents deleted`);
}

cleanupOldData();
```

#### Cronìœ¼ë¡œ ìë™ ì‹¤í–‰
```bash
crontab -e
```

```cron
# ë§¤ì£¼ ì¼ìš”ì¼ ìƒˆë²½ 3ì‹œ ë°ì´í„° ì •ë¦¬
0 3 * * 0 cd /var/www/camping-reservation-notifier/backend && node cleanup-script.js
```

---

## ë¶€ë¡

### A. ì‹œìŠ¤í…œ ì‚¬ì–‘ ê¶Œì¥ì‚¬í•­

#### ì†Œê·œëª¨ (ì‚¬ìš©ì 100ëª… ì´í•˜)
- CPU: 2 Core
- RAM: 2GB
- Storage: 20GB
- ë„¤íŠ¸ì›Œí¬: 1Gbps

#### ì¤‘ê·œëª¨ (ì‚¬ìš©ì 100-1000ëª…)
- CPU: 4 Core
- RAM: 4GB
- Storage: 50GB
- ë„¤íŠ¸ì›Œí¬: 1Gbps

#### ëŒ€ê·œëª¨ (ì‚¬ìš©ì 1000ëª… ì´ìƒ)
- CPU: 8+ Core
- RAM: 8GB+
- Storage: 100GB+
- ë„¤íŠ¸ì›Œí¬: 10Gbps
- ë¡œë“œ ë°¸ëŸ°ì„œ ê³ ë ¤

### B. ì£¼ìš” ë””ë ‰í† ë¦¬ êµ¬ì¡°

```
camping-reservation-notifier/
â”œâ”€â”€ .github/
â”‚   â””â”€â”€ workflows/           # GitHub Actions ì›Œí¬í”Œë¡œìš°
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ app.js          # ì• í”Œë¦¬ì¼€ì´ì…˜ ì§„ì…ì 
â”‚   â”‚   â”œâ”€â”€ config/         # ì„¤ì • íŒŒì¼
â”‚   â”‚   â”œâ”€â”€ middleware/     # Express ë¯¸ë“¤ì›¨ì–´
â”‚   â”‚   â”œâ”€â”€ routes/         # API ë¼ìš°íŠ¸
â”‚   â”‚   â”œâ”€â”€ services/       # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â”‚   â””â”€â”€ utils/          # ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
â”‚   â”œâ”€â”€ .env                # í™˜ê²½ ë³€ìˆ˜ (Git ì œì™¸)
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/     # React ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”œâ”€â”€ contexts/       # React Context
â”‚   â”‚   â”œâ”€â”€ services/       # API í´ë¼ì´ì–¸íŠ¸
â”‚   â”‚   â””â”€â”€ main.jsx        # ì• í”Œë¦¬ì¼€ì´ì…˜ ì§„ì…ì 
â”‚   â”œâ”€â”€ dist/               # ë¹Œë“œ ê²°ê³¼ë¬¼
â”‚   â”œâ”€â”€ .env                # í™˜ê²½ ë³€ìˆ˜ (Git ì œì™¸)
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ camping-scraper-prod-firebase-*.json  # Firebase ì„œë¹„ìŠ¤ ê³„ì • (Git ì œì™¸)
â”œâ”€â”€ .gitignore
â”œâ”€â”€ README.md
â”œâ”€â”€ USER_MANUAL.md          # ì‚¬ìš©ì ë§¤ë‰´ì–¼
â””â”€â”€ OPERATOR_MANUAL.md      # ìš´ì˜ì ë§¤ë‰´ì–¼ (ë³¸ ë¬¸ì„œ)
```

### C. ì—°ë½ì²˜ ë° ì§€ì›

**ê¸°ìˆ  ì§€ì›**:
- GitHub Issues: https://github.com/kwhong/camping-reservation-notifier/issues
- ì´ë©”ì¼: [ê´€ë¦¬ì ì´ë©”ì¼]

**ê¸´ê¸‰ ì—°ë½**:
- ì „í™”: [ê´€ë¦¬ì ì „í™”ë²ˆí˜¸]
- ê·¼ë¬´ ì‹œê°„: í‰ì¼ 09:00-18:00

---

**ë¬¸ì„œ ë²„ì „**: 1.0.0
**ìµœì¢… ì—…ë°ì´íŠ¸**: 2025-10-10
**ì‘ì„±ì**: Claude Code
